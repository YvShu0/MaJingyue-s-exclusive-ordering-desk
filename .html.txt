<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>外卖风味分类购物网</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        // 菜品数据（基于之前的分类）
        const foodData = {
            sweet: [
                { id: 1, shop: "港式/粤式茶餐厅", name: "叉烧饭", desc: "叉烧蜜汁甜香，肉质松软", price: 38, img: "https://picsum.photos/id/292/300/200" },
                { id: 2, shop: "港式/粤式茶餐厅", name: "菠萝油", desc: "外皮酥脆，内馅微甜", price: 18, img: "https://picsum.photos/id/431/300/200" },
                { id: 3, shop: "江浙沪菜系", name: "松鼠桂鱼", desc: "甜咸平衡，糖色提鲜", price: 88, img: "https://picsum.photos/id/488/300/200" },
                { id: 4, shop: "江浙沪菜系", name: "红烧肉", desc: "肥而不腻，甜香浓郁", price: 45, img: "https://picsum.photos/id/674/300/200" },
                { id: 5, shop: "西式甜点店", name: "焦糖布丁", desc: "高甜度，焦糖香气浓郁", price: 28, img: "https://picsum.photos/id/835/300/200" },
                { id: 6, shop: "东南亚风味", name: "泰式菠萝炒饭", desc: "水果甜香，椰奶回甘", price: 42, img: "https://picsum.photos/id/306/300/200" },
                { id: 7, shop: "日韩料理", name: "照烧鸡排饭", desc: "甜咸交织，照烧酱偏甜", price: 36, img: "https://picsum.photos/id/766/300/200" },
                { id: 8, shop: "特色小吃", name: "糖油粑粑", desc: "外脆里糯，高糖香甜", price: 12, img: "https://picsum.photos/id/911/300/200" }
            ],
            sour: [
                { id: 9, shop: "山西/陕西风味", name: "醋浇面", desc: "陈醋醇厚，酸味浓郁", price: 22, img: "https://picsum.photos/id/312/300/200" },
                { id: 10, shop: "山西/陕西风味", name: "凉皮", desc: "酸辣爽口，开胃解腻", price: 16, img: "https://picsum.photos/id/225/300/200" },
                { id: 11, shop: "贵州菜系", name: "酸汤鱼", desc: "发酵酸味，微辣提香", price: 68, img: "https://picsum.photos/id/734/300/200" },
                { id: 12, shop: "云南菜系", name: "柠檬鸡", desc: "果酸清新，自然果香", price: 48, img: "https://picsum.photos/id/139/300/200" },
                { id: 13, shop: "东南亚菜系", name: "冬阴功汤", desc: "青柠复合酸味，鲜香开胃", price: 58, img: "https://picsum.photos/id/267/300/200" },
                { id: 14, shop: "东北菜系", name: "朝鲜冷面", desc: "发酵酸味，清凉解暑", price: 25, img: "https://picsum.photos/id/376/300/200" },
                { id: 15, shop: "日韩料理", name: "泡菜锅", desc: "发酵酸味，微咸提鲜", price: 52, img: "https://picsum.photos/id/493/300/200" },
                { id: 16, shop: "轻食沙拉店", name: "醋汁沙拉", desc: "橄榄油+醋调和，清新低卡", price: 32, img: "https://picsum.photos/id/1080/300/200" }
            ],
            spicy: [
                { id: 17, shop: "川菜馆", name: "水煮鱼", desc: "麻辣鲜香，层次丰富", price: 78, img: "https://picsum.photos/id/628/300/200" },
                { id: 18, shop: "川菜馆", name: "毛血旺", desc: "麻辣浓郁，食材丰富", price: 68, img: "https://picsum.photos/id/793/300/200" },
                { id: 19, shop: "湘菜馆", name: "剁椒鱼头", desc: "纯香辣，鲜辣突出", price: 88, img: "https://picsum.photos/id/827/300/200" },
                { id: 20, shop: "湘菜馆", name: "小炒肉", desc: "香辣下饭，肉质鲜嫩", price: 38, img: "https://picsum.photos/id/488/300/200" },
                { id: 21, shop: "贵州/云南菜系", name: "花溪牛肉粉", desc: "香辣中带果酸", price: 28, img: "https://picsum.photos/id/324/300/200" },
                { id: 22, shop: "韩式料理", name: "辣炒年糕", desc: "甜辣为主，大蒜提香", price: 26, img: "https://picsum.photos/id/766/300/200" },
                { id: 23, shop: "烧烤店", name: "烤串", desc: "孜然+辣椒，干香微辣", price: 3, img: "https://picsum.photos/id/292/300/200" },
                { id: 24, shop: "麻辣烫/冒菜", name: "麻辣香锅", desc: "汤底麻辣，自选配菜", price: 45, img: "https://picsum.photos/id/835/300/200" }
            ],
            bitter: [
                { id: 25, shop: "中式药膳馆", name: "苦瓜排骨汤", desc: "中药苦味，养生清热", price: 58, img: "https://picsum.photos/id/365/300/200" },
                { id: 26, shop: "特色素食店", name: "苦苣沙拉", desc: "天然蔬菜苦味，清爽降火", price: 28, img: "https://picsum.photos/id/1080/300/200" },
                { id: 27, shop: "咖啡/茶馆", name: "美式咖啡", desc: "烘焙苦味，香气浓郁", price: 22, img: "https://picsum.photos/id/431/300/200" },
                { id: 28, shop: "咖啡/茶馆", name: "苦丁茶", desc: "清苦回甘，清热解暑", price: 18, img: "https://picsum.photos/id/225/300/200" },
                { id: 29, shop: "江浙菜系", name: "龙井虾仁", desc: "淡雅苦味，茶香清香", price: 78, img: "https://picsum.photos/id/674/300/200" },
                { id: 30, shop: "江浙菜系", name: "苦瓜炒鸡蛋", desc: "微苦鲜香，营养均衡", price: 26, img: "https://picsum.photos/id/306/300/200" },
                { id: 31, shop: "东南亚菜系", name: "苦瓜炖鸡", desc: "热带食材独特苦味", price: 52, img: "https://picsum.photos/id/312/300/200" },
                { id: 32, shop: "高端日料店", name: "苦瓜天妇罗", desc: "精致苦味，与甜味平衡", price: 68, img: "https://picsum.photos/id/734/300/200" }
            ]
        };

        // 购物车数据
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .flavor-card {
                @apply relative overflow-hidden rounded-xl transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
            }
            .food-card {
                @apply bg-white rounded-xl overflow-hidden shadow-md transition-all duration-300 hover:shadow-xl;
            }
            .btn-primary {
                @apply bg-gradient-to-r text-white font-medium py-2 px-4 rounded-full transition-all duration-300 hover:shadow-lg hover:opacity-90;
            }
            .cart-item {
                @apply flex items-center justify-between p-3 border-b border-gray-100 transition-all duration-200 hover:bg-gray-50;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-800">
    <!-- 导航栏 -->
    <nav class="bg-white shadow-sm fixed top-0 left-0 right-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#" class="flex items-center space-x-2" id="logo">
                <i class="fa fa-cutlery text-2xl text-amber-500"></i>
                <span class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-500 to-orange-500">风味外卖</span>
            </a>
            <div class="flex items-center space-x-4">
                <a href="#" class="text-gray-600 hover:text-amber-500 transition-colors" id="cart-icon">
                    <i class="fa fa-shopping-cart text-xl relative">
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                            {{ cart.length }}
                        </span>
                    </i>
                </a>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 pt-24 pb-16" id="main-content">
        <!-- 口味选择页 -->
        <section id="flavor-selection" class="block">
            <div class="text-center mb-12">
                <h1 class="text-3xl md:text-4xl font-bold mb-4">选择你的风味偏好</h1>
                <p class="text-gray-600 max-w-2xl mx-auto">从酸甜苦辣四种风味中，挑选你想吃的口味，探索更多美味外卖</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- 甜味 -->
                <a href="#" class="flavor-card bg-gradient-to-br from-pink-50 to-red-50 p-6" data-flavor="sweet">
                    <div class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mb-4 mx-auto">
                        <i class="fa fa-candy-cane text-2xl text-pink-500"></i>
                    </div>
                    <h3 class="text-xl font-bold text-center text-pink-600 mb-2">甜味系</h3>
                    <p class="text-gray-600 text-center text-sm">蜜汁甜香、甜咸平衡、高糖醇厚</p>
                    <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-pink-400 to-red-400"></div>
                </a>

                <!-- 酸味 -->
                <a href="#" class="flavor-card bg-gradient-to-br from-yellow-50 to-amber-50 p-6" data-flavor="sour">
                    <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4 mx-auto">
                        <i class="fa fa-lemon-o text-2xl text-yellow-500"></i>
                    </div>
                    <h3 class="text-xl font-bold text-center text-yellow-600 mb-2">酸味系</h3>
                    <p class="text-gray-600 text-center text-sm">陈醋醇厚、果酸清新、发酵酸香</p>
                    <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-yellow-400 to-amber-400"></div>
                </a>

                <!-- 辣味 -->
                <a href="#" class="flavor-card bg-gradient-to-br from-red-50 to-orange-50 p-6" data-flavor="spicy">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4 mx-auto">
                        <i class="fa fa-fire text-2xl text-red-500"></i>
                    </div>
                    <h3 class="text-xl font-bold text-center text-red-600 mb-2">辣味系</h3>
                    <p class="text-gray-600 text-center text-sm">麻辣鲜香、纯香辣爽、甜辣开胃</p>
                    <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-red-400 to-orange-400"></div>
                </a>

                <!-- 苦味 -->
                <a href="#" class="flavor-card bg-gradient-to-br from-green-50 to-teal-50 p-6" data-flavor="bitter">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4 mx-auto">
                        <i class="fa fa-leaf text-2xl text-green-500"></i>
                    </div>
                    <h3 class="text-xl font-bold text-center text-green-600 mb-2">苦味系</h3>
                    <p class="text-gray-600 text-center text-sm">天然苦香、烘焙回甘、养生清热</p>
                    <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-green-400 to-teal-400"></div>
                </a>
            </div>
        </section>

        <!-- 菜品列表页 -->
        <section id="food-list" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold" id="food-list-title">甜味系菜品</h2>
                <a href="#" class="text-gray-600 hover:text-amber-500 transition-colors" id="back-btn">
                    <i class="fa fa-arrow-left mr-1"></i> 返回口味选择
                </a>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="food-grid">
                <!-- 菜品卡片将通过JS动态生成 -->
            </div>
        </section>

        <!-- 购物车页面 -->
        <section id="cart-page" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold">我的购物车</h2>
                <a href="#" class="text-gray-600 hover:text-amber-500 transition-colors" id="back-to-food">
                    <i class="fa fa-arrow-left mr-1"></i> 返回菜品列表
                </a>
            </div>

            <div class="bg-white rounded-xl shadow-md p-6" id="cart-container">
                <!-- 购物车为空时 -->
                <div id="empty-cart" class="text-center py-12 {{ cart.length > 0 ? 'hidden' : 'block' }}">
                    <i class="fa fa-shopping-cart text-5xl text-gray-300 mb-4"></i>
                    <h3 class="text-xl font-bold text-gray-700 mb-2">购物车为空</h3>
                    <p class="text-gray-500 mb-6">快去选择喜欢的菜品加入购物车吧～</p>
                    <a href="#" class="btn-primary bg-gradient-to-r from-amber-500 to-orange-500" id="go-to-selection">
                        开始点餐
                    </a>
                </div>

                <!-- 购物车有商品时 -->
                <div id="cart-items" class="{{ cart.length === 0 ? 'hidden' : 'block' }}">
                    <div class="space-y-2 max-h-[60vh] overflow-y-auto pr-2">
                        <!-- 购物车商品将通过JS动态生成 -->
                    </div>

                    <div class="border-t border-gray-100 mt-6 pt-6">
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-xl font-bold">总计：</span>
                            <span class="text-xl font-bold text-red-500" id="cart-total">¥0.00</span>
                        </div>
                        <button class="btn-primary bg-gradient-to-r from-red-500 to-orange-500 w-full">
                            提交订单
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-4">© 2025 风味外卖购物网 - 酸甜苦辣，总有你所爱</p>
            <div class="flex justify-center space-x-4">
                <a href="#" class="text-gray-400 hover:text-white transition-colors"><i class="fa fa-weibo"></i></a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors"><i class="fa fa-wechat"></i></a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors"><i class="fa fa-instagram"></i></a>
            </div>
        </div>
    </footer>

    <script>
        // DOM 元素
        const flavorSelection = document.getElementById('flavor-selection');
        const foodList = document.getElementById('food-list');
        const cartPage = document.getElementById('cart-page');
        const foodGrid = document.getElementById('food-grid');
        const foodListTitle = document.getElementById('food-list-title');
        const backBtn = document.getElementById('back-btn');
        const cartIcon = document.getElementById('cart-icon');
        const backToFood = document.getElementById('back-to-food');
        const goToSelection = document.getElementById('go-to-selection');
        const logo = document.getElementById('logo');
        const cartItems = document.getElementById('cart-items');
        const emptyCart = document.getElementById('empty-cart');
        const cartCount = document.getElementById('cart-count');
        const cartTotal = document.getElementById('cart-total');

        // 口味名称映射
        const flavorNames = {
            sweet: '甜味系',
            sour: '酸味系',
            spicy: '辣味系',
            bitter: '苦味系'
        };

        // 口味颜色映射
        const flavorColors = {
            sweet: 'from-pink-500 to-red-500',
            sour: 'from-yellow-500 to-amber-500',
            spicy: 'from-red-500 to-orange-500',
            bitter: 'from-green-500 to-teal-500'
        };

        // 当前选中的口味
        let currentFlavor = '';

        // 初始化页面
        updateCartUI();

        // 口味选择点击事件
        document.querySelectorAll('[data-flavor]').forEach(card => {
            card.addEventListener('click', (e) => {
                e.preventDefault();
                currentFlavor = card.dataset.flavor;
                renderFoodList(currentFlavor);
                flavorSelection.classList.add('hidden');
                foodList.classList.remove('hidden');
                cartPage.classList.add('hidden');
            });
        });

        // 返回口味选择
        backBtn.addEventListener('click', (e) => {
            e.preventDefault();
            flavorSelection.classList.remove('hidden');
            foodList.classList.add('hidden');
            cartPage.classList.add('hidden');
        });

        // 点击logo返回口味选择
        logo.addEventListener('click', (e) => {
            e.preventDefault();
            flavorSelection.classList.remove('hidden');
            foodList.classList.add('hidden');
            cartPage.classList.add('hidden');
        });

        // 查看购物车
        cartIcon.addEventListener('click', (e) => {
            e.preventDefault();
            flavorSelection.classList.add('hidden');
            foodList.classList.add('hidden');
            cartPage.classList.remove('hidden');
            updateCartUI();
        });

        // 从购物车返回菜品列表
        backToFood.addEventListener('click', (e) => {
            e.preventDefault();
            flavorSelection.classList.add('hidden');
            foodList.classList.remove('hidden');
            cartPage.classList.add('hidden');
            if (currentFlavor) {
                renderFoodList(currentFlavor);
            }
        });

        // 从空购物车前往口味选择
        goToSelection.addEventListener('click', (e) => {
            e.preventDefault();
            flavorSelection.classList.remove('hidden');
            foodList.classList.add('hidden');
            cartPage.classList.add('hidden');
        });

        // 渲染菜品列表
        function renderFoodList(flavor) {
            const foods = foodData[flavor];
            foodListTitle.textContent = `${flavorNames[flavor]}菜品`;
            foodGrid.innerHTML = '';

            foods.forEach(food => {
                const foodCard = document.createElement('div');
                foodCard.className = 'food-card';
                foodCard.innerHTML = `
                    <div class="h-48 overflow-hidden">
                        <img src="${food.img}" alt="${food.name}" class="w-full h-full object-cover transition-transform duration-500 hover:scale-110">
                    </div>
                    <div class="p-4">
                        <div class="text-xs text-gray-500 mb-1">${food.shop}</div>
                        <h3 class="font-bold text-lg mb-1">${food.name}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-2">${food.desc}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-red-500 font-bold">¥${food.price}</span>
                            <button class="btn-primary bg-gradient-to-r ${flavorColors[flavor]} add-to-cart" data-id="${food.id}">
                                <i class="fa fa-shopping-cart mr-1"></i> 加入购物车
                            </button>
                        </div>
                    </div>
                `;
                foodGrid.appendChild(foodCard);
            });

            // 绑定加入购物车事件
            document.querySelectorAll('.add-to-cart').forEach(btn => {
                btn.addEventListener('click', () => {
                    const foodId = parseInt(btn.dataset.id);
                    addToCart(foodId);
                });
            });
        }

        // 加入购物车
        function addToCart(foodId) {
            // 查找菜品
            let food = null;
            Object.values(foodData).forEach(category => {
                const found = category.find(item => item.id === foodId);
                if (found) food = found;
            });

            if (!food) return;

            // 检查购物车中是否已有该商品
            const existingItemIndex = cart.findIndex(item => item.id === foodId);
            if (existingItemIndex > -1) {
                // 增加数量
                cart[existingItemIndex].quantity += 1;
            } else {
                // 添加新商品
                cart.push({ ...food, quantity: 1 });
            }

            // 保存到本地存储
            localStorage.setItem('cart', JSON.stringify(cart));

            // 更新UI
            updateCartUI();

            // 显示提示
            alert(`${food.name} 已加入购物车！`);
        }

        // 从购物车移除商品
        function removeFromCart(foodId) {
            cart = cart.filter(item => item.id !== foodId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
        }

        // 更新商品数量
        function updateQuantity(foodId, newQuantity) {
            if (newQuantity < 1) return;
            const itemIndex = cart.findIndex(item => item.id === foodId);
            if (itemIndex > -1) {
                cart[itemIndex].quantity = newQuantity;
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartUI();
            }
        }

        // 更新购物车UI
        function updateCartUI() {
            // 更新购物车数量
            cartCount.textContent = cart.length;

            // 更新购物车商品列表
            cartItems.innerHTML = '';

            // 计算总价
            let total = 0;

            cart.forEach(item => {
                total += item.price * item.quantity;

                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="flex items-center">
                        <img src="${item.img}" alt="${item.name}" class="w-16 h-16 rounded-lg object-cover mr-3">
                        <div>
                            <h4 class="font-bold">${item.name}</h4>
                            <div class="text-sm text-gray-500">${item.shop}</div>
                            <div class="text-red-500 font-bold mt-1">¥${item.price}</div>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <button class="w-8 h-8 flex items-center justify-center border rounded-l-lg decrease-quantity" data-id="${item.id}">
                            <i class="fa fa-minus text-sm"></i>
                        </button>
                        <span class="w-12 h-8 flex items-center justify-center border-t border-b">${item.quantity}</span>
                        <button class="w-8 h-8 flex items-center justify-center border rounded-r-lg increase-quantity" data-id="${item.id}">
                            <i class="fa fa-plus text-sm"></i>
                        </button>
                        <button class="ml-4 text-gray-400 hover:text-red-500 transition-colors remove-item" data-id="${item.id}">
                            <i class="fa fa-trash"></i>
                        </button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });

            // 更新总价
            cartTotal.textContent = `¥${total.toFixed(2)}`;

            // 显示/隐藏空购物车提示
            if (cart.length === 0) {
                emptyCart.classList.remove('hidden');
                cartItems.classList.add('hidden');
            } else {
                emptyCart.classList.add('hidden');
                cartItems.classList.remove('hidden');
            }

            // 绑定购物车操作事件
            document.querySelectorAll('.decrease-quantity').forEach(btn => {
                btn.addEventListener('click', () => {
                    const foodId = parseInt(btn.dataset.id);
                    const item = cart.find(item => item.id === foodId);
                    if (item) {
                        updateQuantity(foodId, item.quantity - 1);
                    }
                });
            });

            document.querySelectorAll('.increase-quantity').forEach(btn => {
                btn.addEventListener('click', () => {
                    const foodId = parseInt(btn.dataset.id);
                    const item = cart.find(item => item.id === foodId);
                    if (item) {
                        updateQuantity(foodId, item.quantity + 1);
                    }
                });
            });

            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', () => {
                    const foodId = parseInt(btn.dataset.id);
                    removeFromCart(foodId);
                });
            });
        }

        // 窗口滚动效果
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('nav');
            if (window.scrollY > 10) {
                nav.classList.add('shadow');
            } else {
                nav.classList.remove('shadow');
            }
        });
    </script>
</body>
</html>